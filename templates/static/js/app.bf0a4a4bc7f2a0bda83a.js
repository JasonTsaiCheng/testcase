webpackJsonp([1],{"3DFz":function(t,e){},"888q":function(t,e){},EBf2:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n=a("2bvH"),s={setCookie:function(t,e,a){var i=new Date;i.setTime(i.getTime()+a),i.setDate(i.getDate()+a),document.cookie=t+"="+escape(e)+(null==a?"":";expires="+i.toGMTString())},getCookie:function(t){var e,a=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(a))?e[2]:null},delCookie:function(t){var e=new Date;e.setTime(e.getTime()-1),null!=s.getCookie(t)&&(document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"),console.log("delete successfully")}},o=s;i.default.use(n.a);var r={clickUndiagnosed:function(t){t.undiagnosed=!0,t.diagnosed=!1,t.transform=!1,t.statistics=!1,t.report=!1},clickDiagnosed:function(t){t.undiagnosed=!1,t.diagnosed=!0,t.transform=!1,t.statistics=!1,t.report=!1},clickStatistics:function(t){t.undiagnosed=!1,t.diagnosed=!1,t.transform=!1,t.report=!1,t.statistics=!0},clickTransform:function(t){t.undiagnosed=!1,t.diagnosed=!1,t.transform=!0,t.statistics=!1,t.report=!1},clickReport:function(t,e){t.undiagnosed=!1,t.diagnosed=!1,t.transform=!1,t.statistics=!1,t.report=!0,t.patient_info=e},backToUndiagnosed:function(t){t.undiagnosed=!0,t.diagnosed=!1,t.transform=!1,t.statistics=!1,t.report=!1},rememberPageAndSize:function(t,e){t.page_info=e},setInfo:function(t){t.user_info={name:o.getCookie("name"),token:o.getCookie("token")}},saveHospitalId:function(t,e){t.hospital_id=e,console.log("state.hospital",e)},login:function(t){t.undiagnosed=!0,t.diagnosed=!1,t.transform=!1,t.statistics=!1,t.report=!1,t.leftNav=!0,t.topHeader=!0,t.login=!1,t.user_info={name:o.getCookie("name"),token:o.getCookie("token")}},logout:function(t){t.undiagnosed=!1,t.diagnosed=!1,t.transform=!1,t.statistics=!1,t.report=!1,t.leftNav=!1,t.topHeader=!1,t.login=!0,o.delCookie("token"),o.delCookie("name"),o.delCookie("hospital_id"),t.user_info={name:o.getCookie("name"),token:o.getCookie("token")}}},l=new n.a.Store({state:{patient_info:{},page_info:{},user_info:{},undiagnosed:!1,diagnosed:!1,transform:!1,statistics:!1,report:!1,leftNav:!1,topHeader:!1,login:!0,hospital_id:0},mutations:r}),c={name:"orbis_leftNav",store:l,methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},add:function(){console.log("add Event from leftNav"),l.commit("increase")}},mounted:function(){var t=window.innerHeight;console.log(t),document.getElementById("leftNav").style.height=t+"px"}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"leftNav",attrs:{id:"leftNav"}},[a("el-container",[a("el-header",{staticClass:"logo"},[t._v("OrbisBioTech")])],1),t._v(" "),a("el-container",[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1-1","background-color":"#2F4050","text-color":"#fff"},on:{open:t.handleOpen,close:t.handleClose}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"icon iconfont icon-yiliao_"}),t._v(" "),a("span",[t._v("PACS")])]),t._v(" "),a("el-menu-item",{attrs:{id:"undiagnosed",index:"1-1"},on:{click:function(e){return t.$store.commit("clickUndiagnosed")}}},[t._v("未诊列表")]),t._v(" "),a("el-menu-item",{attrs:{id:"diagnosed",index:"1-2"},on:{click:function(e){return t.$store.commit("clickDiagnosed")}}},[t._v("已诊列表")])],2),t._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:function(e){return t.$store.commit("clickTransform")}}},[a("i",{staticClass:"icon iconfont icon-zhuanhuan"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("病患转化")])]),t._v(" "),a("el-menu-item",{attrs:{index:"5"},on:{click:function(e){return t.$store.commit("clickStatistics")}}},[a("i",{staticClass:"icon iconfont icon-shuju1"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("数据统计")])])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(c,d,!1,function(t){a("EBf2")},"data-v-be5e023e",null).exports,u={name:"topHeader",created:function(){var t=this.$store.state.user_info;this.user_info=t,console.log("user_info",t)},methods:{logout:function(){this.$store.commit("logout")}},data:function(){return{user_info:{}}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topHeader"},[[a("div",[a("el-row",[a("el-col",{attrs:{span:21}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:3}},[a("a",{attrs:{href:"javascript:;"}},[a("i",{staticClass:"el-icon-s-custom"}),t._v(t._s(t.user_info.name))]),t._v("\n              \n          "),a("a",{attrs:{href:"javascript:;"},on:{click:t.logout}},[a("i",{staticClass:"el-icon-switch-button"},[t._v("退出")])])])],1)],1)]],2)},staticRenderFns:[]};var _=a("VU/8")(u,h,!1,function(t){a("SvL8")},"data-v-3d9bcd77",null).exports,g=a("woOf"),m=a.n(g),v=a("mtWM"),f=a.n(v),b=a("mvHQ"),y=a.n(b),w=a("Dd8w"),x=a.n(w),k=a("//Fk"),C=a.n(k),F=new i.default,S=f.a.create({baseURL:"http://192.168.0.151:8000",timeout:5e3});S.interceptors.request.use(function(t){var e=o.getCookie("token");return console.log("拦截中",e),null===e?(F.$message("登陆过期,即将返回登陆页面"),setTimeout("window.location.reload()",2e3),C.a.reject(error)):("post"===t.method?t.data=x()({},t.data):t.params=x()({},t.params),t.headers["Content-Type"]="application/x-www-form-urlencoded",t)},function(t){return F.$message(t),C.a.reject(t)}),S.interceptors.response.use(function(t){return console.log(t.data),t.data,t.data},function(t){console.log("error"),console.log(t),console.log(y()(t));var e=404===y()(t).status?"404":"操作异常";return console.log(e),C.a.reject(t)});var V=S,$="http://192.168.0.151:7000",A=function(t){return f.a.post($+"/operation/sendSms/",t).then(function(t){return t.data})},T=function(t){return V({url:"/operation/editBasicInfo/",method:"post",data:t})},z="http://192.168.0.151:7000/",D={name:"undiagnosed",created:function(){var t=this.$store.state.page_info;t.page_size&&t.currentPage?(console.log("111122",t.page_size,t.currentPage),this.page_size=t.page_size,this.currentPage=t.currentPage,this.get_patients(t.currentPage,t.page_size)):(console.log("222211",o.getCookie("hospital_id")),this.get_patients(1,10))},mounted:function(){var t=window.innerWidth-250;console.log(t),document.getElementById("rightNav").style.width=t+"px"},methods:{refresh:function(){this.currentPage=1;var t=this.page_size,e=this.inputVal;this.otherDate?(this.get_patients_by_rules(1,t,this.dateValue,e),console.log("otherdate")):(this.get_patients_by_rules(1,t,"",e),console.log("total"))},delieverPageAndSize:function(){var t=this.currentPage,e=this.page_size,a={};a.currentPage=t,a.page_size=e,this.$store.commit("rememberPageAndSize",a)},handleSizeChange:function(t){var e=t;this.page_size=e,this.currentPage=1;var a=this.currentPage,i=this.inputVal;this.delieverPageAndSize(),console.log(a,e),this.otherDate?(this.get_patients_by_rules(a,e,this.dateValue,i),console.log("otherdate")):(this.get_patients_by_rules(a,e,"",i),console.log("page_size total"))},handleCurrentChange:function(t){var e=t,a=this.page_size,i=this.inputVal;console.log(e,a),this.delieverPageAndSize(),this.otherDate?(this.get_patients_by_rules(e,a,this.dateValue,i),console.log("otherdate")):(this.get_patients_by_rules(e,a,"",i),console.log("pagination total"))},turnBlue:function(t){"isActive1"==t.currentTarget.id&&(console.log("isActive1"),this.isActive1=!0,this.isActive4=!1,this.otherDate=!1,this.dateValue="",this.refresh())},get_patients:function(t,e,a,i){var n=this,s=o.getCookie("hospital_id");f.a.get(z+"/patients/?p="+t+"&page_size="+e+"&hospital_id="+s+"&ordering=-apply_time&status=0").then(function(t){console.log(t),n.tableData=t.data.results,n.totalNum=t.data.count}).catch(function(t){console.log(t)})},get_patients_by_rules:function(t,e,a,i){var n=this,s=o.getCookie("hospital_id");f.a.get(z+"/patients/?p="+t+"&page_size="+e+"&ordering=-apply_time&apply_time="+a+"&hospital_id="+s+"&search="+i+"&status=0").then(function(t){console.log(t),n.tableData=t.data.results,n.totalNum=t.data.count}).catch(function(t){console.log(t)})},selectDate:function(){this.isActive1=!1,this.isActive4=!0,this.otherDate=!0;var t=new Date(this.dateValue),e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();a>=1&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i);var n=e+"-"+a+"-"+i;this.dateValue=n,this.currentPage=1;var s=this.inputVal;console.log(this.dateValue),console.log(s),this.get_patients_by_rules(1,this.page_size,n,s)},searchBtn:function(){console.log("searchBtn"),this.currentPage=1,this.get_patients_by_rules(1,this.page_size,this.dateValue,this.inputVal)},formatSex:function(t){return"1"===t.patient_gender?"男":"0"===t.patient_gender?"女":"未知"},formatStatus:function(t){return"0"===t.status?"未诊断":"2"===t.status?"已诊断":"诊断中"},formatButton:function(t){return"1"===t.pic_upload||"0"!==t.pic_upload},handleEdit:function(t,e){console.log("qqqqq",t,e),this.editFormVisible=!0,this.editForm=m()({},e)},handleAdd:function(){this.addFormVisible=!0,this.addForm={patient_name:"",patient_gender:-1,patient_age:0,patient_tel:"",address:""}},checkIsDiagnoseAgain:function(){var t,e=this,a=m()({},this.addForm);(t=a,V({url:"/operation/check/",method:"post",data:t})).then(function(t){console.log(1111,t),"0"==t?console.log("查无此人"):e.$alert("经系统检测，该名患者已存在，确认历史信息无误后可直接提交","温馨提示",{confirmButtonText:"确定",callback:function(a){console.log(t),e.addFormVisible=!1,e.editFormVisible=!0,e.editForm=t[0].fields,e.editForm.patient_id=t[0].pk,e.editForm.diagnose_again="1",e.$refs.addForm.resetFields()}})})},addSubmit:function(){var t=this;this.$refs.addForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.addLoading=!0;var e,a=m()({},t.addForm);a.user_token=o.getCookie("token"),console.log("hhhhh",a),(e=a,V({url:"/operation/add/",method:"post",data:e})).then(function(e){t.addLoading=!1,t.$message({message:"提交成功",type:"success"}),t.$refs.addForm.resetFields(),t.addFormVisible=!1,t.refresh()})})})},handleDel:function(t,e){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){var t,i={id:e.patient_id};(t=i,V({url:"/operation/remove/",method:"post",data:t})).then(function(t){console.log(1111,i),"0"==t.data?a.$alert("经系统检测，该名患者已有诊断记录，无法删除","温馨提示",{confirmButtonText:"确定",callback:function(t){console.log(t)}}):(a.$message({message:"删除成功",type:"success"}),a.refresh())})}).catch(function(){})},editSubmit:function(){var t=this;this.$refs.editForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.editLoading=!0;var e=m()({},t.editForm);T(e).then(function(e){t.editLoading=!1,t.$message({message:"提交成功",type:"success"}),t.$refs.editForm.resetFields(),t.editFormVisible=!1,t.refresh()})})})},clickReport:function(t,e){this.editForm=m()({},e);var a={};a.page_size=this.page_size,a.currentPage=this.currentPage,a.patient_name=this.editForm.patient_name,a.patient_gender=this.editForm.patient_gender,a.patient_age=this.editForm.patient_age,a.patient_id=this.editForm.patient_id,a.diagnose_record=this.editForm.diagnose_record,a.apply_time=this.editForm.apply_time,this.$store.commit("clickReport",a)}},data:function(){return{page_info:{},tableData:[],dateValue:"",isActive1:!0,isActive4:!1,currentPage:1,inputVal:"",page_size:10,totalNum:30,otherDate:!1,pic_upload:!1,pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},editFormVisible:!1,editLoading:!1,editFormRules:{patient_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],patient_tel:[{required:!0,message:"请输入手机号",trigger:"blur"}]},editForm:{patient_id:0,patient_name:"测试",patient_gender:"0",patient_age:0,patient_tel:18888888888,birth:"",address:""},addFormVisible:!1,addLoading:!1,addFormRules:{patient_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],patient_tel:[{required:!0,message:"请输入手机号",trigger:"blur"}]},addForm:{patient_id:0,patient_name:"张三",patient_gender:1,patient_age:0,patient_tel:"",address:""}}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"undiagnosed"},[a("el-row",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("PACS")]),t._v(" "),a("el-breadcrumb-item",[t._v("未诊列表")])],1)],1),t._v(" "),a("el-row",{staticClass:"operationNew"},[a("el-col",{class:{active:t.isActive1},attrs:{span:2}},[a("a",{attrs:{id:"isActive1",href:"javascript:;"},on:{click:t.turnBlue}},[t._v("全部")])]),t._v(" "),a("el-col",{staticClass:"timepicker",class:{active:t.isActive4},attrs:{span:3}},[a("a",{attrs:{id:"isActive4",href:"javascript:;"},on:{click:function(t){}}},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":t.pickerOptions},on:{change:t.selectDate},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("添加患者"),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-col",{attrs:{span:2}},[a("a",{attrs:{href:"javascript:;"},on:{click:t.refresh}},[a("i",{staticClass:"icon iconfont icon-shuaxin1"}),t._v("刷新")])]),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"输入患者姓名/手机号/身份证号 可模糊检索"},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchBtn}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("el-row",{staticClass:"dataZone"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"patient_id",label:"患者编号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_name",label:"姓名",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_gender",label:"性别",width:"200",formatter:t.formatSex}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_age",label:"年龄",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_tel",label:"手机号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"apply_time",label:"录入时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",formatter:t.formatStatus}}),t._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.formatButton(e.row)?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-first-aid-kit",circle:""},on:{click:function(a){return t.clickReport(e.$index,e.row)}}}):t._e(),t._v(" "),t.formatButton(e.row)?t._e():a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",circle:""},on:{click:function(a){return t.handleDel(e.$index,e.row)}}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}})]}}])})],1)]],2),t._v(" "),a("el-row",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10],"page-size":t.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addFormVisible=e}},model:{value:t.addFormVisible,callback:function(e){t.addFormVisible=e},expression:"addFormVisible"}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"80px",rules:t.addFormRules}},[a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"姓名",prop:"patient_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addForm.patient_name,callback:function(e){t.$set(t.addForm,"patient_name",e)},expression:"addForm.patient_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"patient_tel"}},[a("el-input",{staticStyle:{width:"25%"},attrs:{type:"text",placeholder:"手机号",oninput:"value=value.replace(/[^\\d]/g,'')",maxlength:"11","show-word-limit":""},on:{blur:t.checkIsDiagnoseAgain},model:{value:t.addForm.patient_tel,callback:function(e){t.$set(t.addForm,"patient_tel",e)},expression:"addForm.patient_tel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:t.addForm.patient_gender,callback:function(e){t.$set(t.addForm,"patient_gender",e)},expression:"addForm.patient_gender"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[t._v("男")]),t._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:0}},[t._v("女")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"年龄"}},[a("el-input-number",{staticStyle:{width:"25%"},attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",min:0,max:200},model:{value:t.addForm.patient_age,callback:function(e){t.$set(t.addForm,"patient_age",e)},expression:"addForm.patient_age"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.addForm.address,callback:function(e){t.$set(t.addForm,"address",e)},expression:"addForm.address"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.addLoading},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editFormVisible=e}},model:{value:t.editFormVisible,callback:function(e){t.editFormVisible=e},expression:"editFormVisible"}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"80px",rules:t.editFormRules}},[a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"姓名",prop:"patient_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.patient_name,callback:function(e){t.$set(t.editForm,"patient_name",e)},expression:"editForm.patient_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"patient_tel"}},[a("el-input",{staticStyle:{width:"25%"},attrs:{type:"text",placeholder:"手机号",oninput:"value=value.replace(/[^\\d]/g,'')",maxlength:"11","show-word-limit":""},model:{value:t.editForm.patient_tel,callback:function(e){t.$set(t.editForm,"patient_tel",e)},expression:"editForm.patient_tel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:t.editForm.patient_gender,callback:function(e){t.$set(t.editForm,"patient_gender",e)},expression:"editForm.patient_gender"}},[a("el-radio",{staticClass:"radio",attrs:{label:"1"}},[t._v("男")]),t._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"0"}},[t._v("女")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"年龄"}},[a("el-input-number",{staticStyle:{width:"25%"},attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",min:0,max:200},model:{value:t.editForm.patient_age,callback:function(e){t.$set(t.editForm,"patient_age",e)},expression:"editForm.patient_age"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.editForm.address,callback:function(e){t.$set(t.editForm,"address",e)},expression:"editForm.address"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.editLoading},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var P=a("VU/8")(D,L,!1,function(t){a("3DFz")},"data-v-83fe81a0",null).exports,R={name:"undiagnosed",created:function(){this.get_patients(1,10)},mounted:function(){var t=window.innerHeight;console.log("windowHeight",t)},methods:{refresh:function(){this.currentPage=1;var t=this.page_size,e=this.inputVal;this.otherDate?(this.get_patients_by_rules(1,t,this.dateValue,e),console.log("otherdate")):(this.get_patients_by_rules(1,t,"",e),console.log("total"))},handleSizeChange:function(t){var e=t;this.page_size=e,this.currentPage=1;var a=this.currentPage,i=this.inputVal;console.log(a,e),this.otherDate?(this.get_patients_by_rules(a,e,this.dateValue,i),console.log("otherdate")):(this.get_patients_by_rules(a,e,"",i),console.log("page_size total"))},handleCurrentChange:function(t){var e=t,a=this.page_size,i=this.inputVal;console.log(e,a),this.otherDate?(this.get_patients_by_rules(e,a,this.dateValue,i),console.log("otherdate")):(this.get_patients_by_rules(e,a,"",i),console.log("pagination total"))},turnBlue:function(t){"isActive1"==t.currentTarget.id&&(console.log("isActive1"),this.isActive1=!0,this.isActive2=!1,this.isActive3=!1,this.isActive4=!1,this.otherDate=!1,this.dateValue="",this.refresh())},get_patients:function(t,e,a,i){var n=this,s=o.getCookie("hospital_id");f.a.get("http://192.168.0.151:7000//patients/?p="+t+"&page_size="+e+"&hospital_id="+s+"&ordering=-apply_time&diagnose_record=1").then(function(t){console.log(t.data.results),n.tableData=t.data.results,n.totalNum=t.data.count}).catch(function(t){console.log(t)})},get_patients_by_rules:function(t,e,a,i){var n=this,s=o.getCookie("hospital_id");f.a.get("http://192.168.0.151:7000//patients/?p="+t+"&page_size="+e+"&ordering=-apply_time&apply_time="+a+"&hospital_id="+s+"&search="+i+"&diagnose_record=1").then(function(t){console.log(t),n.tableData=t.data.results,n.totalNum=t.data.count}).catch(function(t){console.log(t)})},selectDate:function(){this.isActive1=!1,this.isActive4=!0,this.otherDate=!0;var t=new Date(this.dateValue),e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();a>=1&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i);var n=e+"-"+a+"-"+i;this.dateValue=n,this.currentPage=1;var s=this.inputVal;console.log(this.dateValue),console.log(s),this.get_patients_by_rules(1,this.page_size,n,s)},searchBtn:function(){console.log("searchBtn"),this.currentPage=1,this.get_patients_by_rules(1,this.page_size,this.dateValue,this.inputVal)},formatSex:function(t){return"1"===t.patient_gender?"男":"0"===t.patient_gender?"女":"未知"},formatStatus:function(t){return"0"===t.status?"已诊断":(t.status,"已诊断")},formatTime:function(t){var e=t.diagnose.length-1;return t.diagnose[e].apply_time},handleEdit:function(t,e){console.log(t,e),this.editFormVisible=!0,this.editForm=m()({},e)},editSubmit:function(){var t=this;this.$refs.editForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.editLoading=!0;var e=m()({},t.editForm);T(e).then(function(e){t.editLoading=!1,t.$message({message:"提交成功",type:"success"}),t.$refs.editForm.resetFields(),t.editFormVisible=!1,t.refresh()})})})},handleView:function(t,e){this.reportFormVisible=!0,this.value=!0,this.reportForm=m()({},e),console.log(t,e);var a=this.getPictureInfo(e.picture);console.log("picList",a),this.picList=a},closeReport:function(){var t=this;setTimeout(function(){t.reportFormVisible=!1},500)},getPictureInfo:function(t){for(var e={},a=[],i=0;i<t.length;i++){var n=t[i],s=n.pic_name;if(e[n.own_to])for(var o=0;o<a.length;o++){var r=a[o];if(r.own_to===n.own_to){r.data.push(s);break}}else a.push({own_to:n.own_to,data:[s]}),e[n.own_to]=n}return a},changeCarousel:function(t){console.log(t);var e="http://192.168.0.151:7000/media/",a=[];this.url=e+this.picList[t].data[t];for(var i=0;i<this.picList[t].data.length;i++)a.push(e+this.picList[t].data[i]);this.srcList=a,console.log(e+this.picList[t].data[t]),console.log("132456",a)}},data:function(){return{picList:[],tableData:[],dateValue:"",isActive1:!0,isActive2:!1,isActive3:!1,isActive4:!1,currentPage:1,inputVal:"",value:!0,page_size:10,totalNum:30,otherDate:!1,pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},editFormVisible:!1,reportFormVisible:!1,editLoading:!1,editFormRules:{patient_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],patient_tel:[{required:!0,message:"请输入手机号",trigger:"blur"}]},editForm:{patient_id:0,patient_name:"测试",patient_gender:"0",patient_age:0,patient_tel:18888888888,address:""},reportForm:{patient_id:0,patient_name:"测试",patient_gender:"0",patient_age:0,patient_tel:18888888888,address:"",diagnose:[]},url:"http://127.0.0.1:8000/media/156654226624064420667.jpg",srcList:["https://fuss10.elemecdn.com/8/27/f01c15bb73e1ef3793e64e6b7bbccjpeg.jpeg","https://fuss10.elemecdn.com/1/8e/aeffeb4de74e2fde4bd74fc7b4486jpeg.jpeg"]}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"undiagnosed"},[a("el-row",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("PACS")]),t._v(" "),a("el-breadcrumb-item",[t._v("已诊列表")])],1)],1),t._v(" "),a("el-row",{staticClass:"operationNew"},[a("el-col",{class:{active:t.isActive1},attrs:{span:2}},[a("a",{attrs:{id:"isActive1",href:"javascript:;"},on:{click:t.turnBlue}},[t._v("全部")])]),t._v(" "),a("el-col",{staticClass:"timepicker",class:{active:t.isActive4},attrs:{span:3}},[a("a",{attrs:{id:"isActive4",href:"javascript:;"},on:{click:function(t){}}},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":t.pickerOptions},on:{change:t.selectDate},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"}},[t._v("批量生成报告"),a("i",{staticClass:"el-icon-printer el-icon--right"})])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-col",{attrs:{span:2}},[a("a",{attrs:{href:"javascript:;"},on:{click:t.refresh}},[a("i",{staticClass:"icon iconfont icon-shuaxin1"}),t._v("刷新")])]),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"输入患者姓名/手机号/身份证号 可模糊检索"},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchBtn}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("el-row",{staticClass:"dataZone"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"patient_id",label:"患者编号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_name",label:"姓名",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_gender",label:"性别",width:"200",formatter:t.formatSex}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_age",label:"年龄",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_tel",label:"手机号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"apply_time",label:"录入时间",width:"200",formatter:t.formatTime}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",formatter:t.formatStatus}}),t._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-view",circle:""},on:{click:function(a){return t.handleView(e.$index,e.row)}}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}})]}}])})],1)]],2),t._v(" "),a("el-row",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10],"page-size":t.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editFormVisible=e}},model:{value:t.editFormVisible,callback:function(e){t.editFormVisible=e},expression:"editFormVisible"}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"80px",rules:t.editFormRules}},[a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"姓名",prop:"patient_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.patient_name,callback:function(e){t.$set(t.editForm,"patient_name",e)},expression:"editForm.patient_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"patient_tel"}},[a("el-input",{staticStyle:{width:"25%"},attrs:{type:"text",placeholder:"手机号",oninput:"value=value.replace(/[^\\d]/g,'')",maxlength:"11","show-word-limit":""},model:{value:t.editForm.patient_tel,callback:function(e){t.$set(t.editForm,"patient_tel",e)},expression:"editForm.patient_tel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:t.editForm.patient_gender,callback:function(e){t.$set(t.editForm,"patient_gender",e)},expression:"editForm.patient_gender"}},[a("el-radio",{staticClass:"radio",attrs:{label:"1"}},[t._v("男")]),t._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"0"}},[t._v("女")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"年龄"}},[a("el-input-number",{staticStyle:{width:"25%"},attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",min:0,max:200},model:{value:t.editForm.patient_age,callback:function(e){t.$set(t.editForm,"patient_age",e)},expression:"editForm.patient_age"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.editForm.address,callback:function(e){t.$set(t.editForm,"address",e)},expression:"editForm.address"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.editLoading},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),t.reportFormVisible?a("el-carousel",{staticStyle:{width:"800px",position:"fixed","z-index":"99",left:"30%",top:"1%",bottom:"1%"},attrs:{interval:4e3,height:"900px"},on:{change:t.changeCarousel}},t._l(this.reportForm.diagnose,function(e,i){return a("el-carousel-item",{key:e.id},[a("el-row",{staticStyle:{"text-align":"center","font-weight":"bold","font-size":"x-large","margin-top":"10px"}},[a("el-col",{attrs:{span:5}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:14,id:"report"}},[t._v("诊断报告")]),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.closeReport},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("span",{staticStyle:{"font-weight":"unset","font-size":"small"}},[t._v("序号:"+t._s(i+1)+"/"+t._s(t.reportForm.diagnose.length))])],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("姓名:"+t._s(t.reportForm.patient_name))]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("性别:"+t._s(t.reportForm.patient_gender))]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("年龄:"+t._s(t.reportForm.patient_age))]),t._v(" "),a("el-col",{attrs:{span:5}},[t._v("日期:"+t._s(t.reportForm.diagnose[i].diagnose_time))])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:12}},[t._v("OD")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:12}},[t._v("OS")])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:12}},[a("div",{staticClass:"demo-image__preview"},[a("el-image",{staticStyle:{height:"250px"},attrs:{src:t.url,"preview-src-list":t.srcList}})],1)]),t._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:12}},[a("div",{staticClass:"demo-image__preview"},[a("el-image",{staticStyle:{height:"250px"},attrs:{src:t.url,"preview-src-list":t.srcList}})],1)])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px","font-weight":"bold","font-size":"large"}},[a("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("影像发现")]),t._v(" "),a("el-col",{attrs:{span:19}})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("类别")]),t._v(" "),a("el-col",{attrs:{span:19}})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("渗出")]),t._v(" "),a("el-col",{attrs:{span:19}})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("出血")]),t._v(" "),a("el-col",{attrs:{span:19}})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px","font-weight":"bold","font-size":"large"}},[a("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("诊断")]),t._v(" "),a("el-col",{attrs:{span:19}})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("左眼")]),t._v(" "),a("el-col",{attrs:{span:19}})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v("右眼")]),t._v(" "),a("el-col",{attrs:{span:19}})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px","font-weight":"bold","font-size":"large"}},[a("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:23}},[t._v("建议:")])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px","font-size":"large"}},[a("el-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:23}},[t._v(t._s(t.reportForm.diagnose[i].diagnose_advice))])],1)],1)}),1):t._e()],1)},staticRenderFns:[]};var N=a("VU/8")(R,E,!1,function(t){a("hhvP")},"data-v-3fd92453",null).exports,B={name:"undiagnosed",created:function(){this.get_patients(1,10)},methods:{refresh:function(){this.currentPage=1;var t=this.page_size,e=this.inputVal;this.otherDate?(this.get_patients_by_rules(1,t,this.dateValue,e),console.log("otherdate")):(this.get_patients_by_rules(1,t,"",e),console.log("total"))},handleSizeChange:function(t){var e=t;this.page_size=e,this.currentPage=1;var a=this.currentPage,i=this.inputVal;console.log(a,e),this.otherDate?(this.get_patients_by_rules(a,e,this.dateValue,i),console.log("otherdate")):(this.get_patients_by_rules(a,e,"",i),console.log("page_size total"))},handleCurrentChange:function(t){var e=t,a=this.page_size,i=this.inputVal;console.log(e,a),this.otherDate?(this.get_patients_by_rules(e,a,this.dateValue,i),console.log("otherdate")):(this.get_patients_by_rules(e,a,"",i),console.log("pagination total"))},turnBlue:function(t){"isActive1"==t.currentTarget.id&&(console.log("isActive1"),this.isActive1=!0,this.isActive2=!1,this.isActive3=!1,this.isActive4=!1,this.otherDate=!1,this.dateValue="",this.refresh())},tabledataProcess:function(t){for(var e=[],a=[],i=0;i<t.length;i++)if(-1===e.indexOf(t[i].patient_id)){var n=t[i].diagnose.length;null!==t[i].diagnose[n-1].review_time&&(e.push(t[i].patient_id),a.push(t[i]))}return console.log(a),a},get_patients:function(t,e,a,i){var n=this,s=o.getCookie("hospital_id");f.a.get("http://192.168.0.151:7000//patients/?p="+t+"&page_size="+e+"&hospital_id="+s+"&ordering=-apply_time&review_time=-").then(function(t){var e=n.tabledataProcess(t.data.results);n.tableData=e,n.totalNum=e.length}).catch(function(t){console.log(t)})},get_patients_by_rules:function(t,e,a,i){var n=this,s=o.getCookie("hospital_id");f.a.get("http://192.168.0.151:7000//patients/?p="+t+"&page_size="+e+"&ordering=-apply_time&apply_time="+a+"&search="+i+"&hospital_id"+s+"&review_time=-").then(function(t){var e=n.tabledataProcess(t.data.results);n.tableData=e,n.totalNum=e.length}).catch(function(t){console.log(t)})},selectDate:function(){this.isActive1=!1,this.isActive4=!0,this.otherDate=!0;var t=new Date(this.dateValue),e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();a>=1&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i);var n=e+"-"+a+"-"+i;this.dateValue=n,this.currentPage=1;var s=this.inputVal;console.log(this.dateValue),console.log(s),this.get_patients_by_rules(1,this.page_size,n,s)},searchBtn:function(){console.log("searchBtn"),this.currentPage=1,this.get_patients_by_rules(1,this.page_size,this.dateValue,this.inputVal)},formatSex:function(t){return"1"===t.patient_gender?"男":"0"===t.patient_gender?"女":"未知"},formatStatus:function(t){var e=t.diagnose.length-1;return"unInform"===t.diagnose[e].inform_type?"未通知":"message"===t.diagnose[e].inform_type?"已短息通知":"已电话通知"},formatTime:function(t){var e=t.diagnose.length-1;return t.diagnose[e].apply_time},handleEdit:function(t,e){console.log(t,e);var a=e.diagnose.length;e.review_time=e.diagnose[a-1].review_time,e.review_hospital=e.diagnose[a-1].review_hospital,this.editFormVisible=!0,this.editForm=m()({},e)},editSubmit:function(){var t=this;this.$refs.editForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.editLoading=!0;var e,a=m()({},t.editForm);console.log(a),(e=a,V({url:"/operation/editReviewInfo/",method:"post",data:e})).then(function(e){t.editLoading=!1,t.$message({message:"提交成功",type:"success"}),t.$refs.editForm.resetFields(),t.editFormVisible=!1,t.refresh()})})})},handleSelectionChange:function(t){this.multipleSelection=t,console.log(t)},showSms:function(t,e){this.dialogVisible=!0,console.log(t,e);var a=e.diagnose.length;e.review_time=e.diagnose[a-1].review_time,e.review_hospital=e.diagnose[a-1].review_hospital,this.editForm=m()({},e)},sendSms:function(){var t=this;this.dialogVisible=!1;var e=m()({},this.editForm);A(e).then(function(e){"1"==e?t.$message({message:"短信发送成功",type:"success"}):t.$message({message:"短信发送失败",type:"error"}),t.editLoading=!1,t.refresh()})},batchSendSms:function(){var t=this;if(0!=this.multipleSelection.length){this.dialogVisible=!1;var e=this.multipleSelection;A(e).then(function(e){"1"==e?t.$message({message:"短信发送成功",type:"success"}):t.$message({message:"短信发送失败",type:"error"}),t.editLoading=!1,t.refresh()})}else this.$message({message:"请选择患者",type:"error"})}},data:function(){return{tableData:[],multipleSelection:[],dateValue:"",isActive1:!0,isActive2:!1,isActive3:!1,isActive4:!1,currentPage:1,inputVal:"",page_size:10,totalNum:30,otherDate:!1,dialogVisible:!1,pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},reviewTimeOption:{disabledDate:function(t){return t.getTime()<Date.now()}},editFormVisible:!1,editLoading:!1,editFormRules:{patient_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],patient_tel:[{required:!0,message:"请输入手机号",trigger:"blur"}],review_time:[{required:!0,message:"请输复诊时间",trigger:"blur"}],review_hospital:[{required:!0,message:"请输复诊医院",trigger:"blur"}]},editForm:{patient_id:0,patient_name:"测试",patient_gender:"0",patient_age:0,patient_tel:18888888888,birth:"",address:"",review_time:"",review_hospital:"兴园社区"}}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"undiagnosed"},[a("el-row",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("PACS")]),t._v(" "),a("el-breadcrumb-item",[t._v("转化列表")])],1)],1),t._v(" "),a("el-row",{staticClass:"operationNew"},[a("el-col",{class:{active:t.isActive1},attrs:{span:2}},[a("a",{attrs:{id:"isActive1",href:"javascript:;"},on:{click:t.turnBlue}},[t._v("全部")])]),t._v(" "),a("el-col",{staticClass:"timepicker",class:{active:t.isActive4},attrs:{span:3}},[a("a",{attrs:{id:"isActive4",href:"javascript:;"},on:{click:function(t){}}},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":t.pickerOptions},on:{change:t.selectDate},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}})],1)]),t._v(" "),a("el-col",{attrs:{span:8}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:t.batchSendSms}},[t._v("批量发送短信"),a("i",{staticClass:"el-icon-s-comment el-icon--right"})])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-col",{attrs:{span:2}},[a("a",{attrs:{href:"javascript:;"},on:{click:t.refresh}},[a("i",{staticClass:"icon iconfont icon-shuaxin1"}),t._v("刷新")])]),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"输入患者姓名/手机号/身份证号 可模糊检索"},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchBtn}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("el-row",{staticClass:"dataZone"},[[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_id",label:"患者编号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_name",label:"姓名",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_gender",label:"性别",width:"200",formatter:t.formatSex}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_age",label:"年龄",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"patient_tel",label:"手机号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"apply_time",label:"录入时间",width:"200",formatter:t.formatTime}}),t._v(" "),a("el-table-column",{attrs:{prop:"diagnose[diagnose.length - 1].inform_type",label:"状态",formatter:t.formatStatus}}),t._v(" "),a("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-chat-dot-round",circle:""},on:{click:function(a){return t.showSms(e.$index,e.row)}}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}})]}}])})],1)]],2),t._v(" "),a("el-row",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10],"page-size":t.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑复查医院和时间",visible:t.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editFormVisible=e}},model:{value:t.editFormVisible,callback:function(e){t.editFormVisible=e},expression:"editFormVisible"}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"80px",rules:t.editFormRules}},[a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"姓名",prop:"patient_name"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:t.editForm.patient_name,callback:function(e){t.$set(t.editForm,"patient_name",e)},expression:"editForm.patient_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"patient_tel"}},[a("el-input",{staticStyle:{width:"25%"},attrs:{type:"text",placeholder:"手机号",oninput:"value=value.replace(/[^\\d]/g,'')",maxlength:"11","show-word-limit":""},model:{value:t.editForm.patient_tel,callback:function(e){t.$set(t.editForm,"patient_tel",e)},expression:"editForm.patient_tel"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"复查时间",prop:"review_time"}},[a("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd","picker-options":t.reviewTimeOption},model:{value:t.editForm.review_time,callback:function(e){t.$set(t.editForm,"review_time",e)},expression:"editForm.review_time"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"复查医院",prop:"review_hospital"}},[a("el-input",{attrs:{type:"text"},model:{value:t.editForm.review_hospital,callback:function(e){t.$set(t.editForm,"review_hospital",e)},expression:"editForm.review_hospital"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.editLoading},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("您将要发送如下短信:"),a("br"),t._v("尊敬的"+t._s(t.editForm.patient_name)+"\n        "),"0"===t.editForm.patient_gender?a("span",[t._v("女士")]):a("span",[t._v("先生")]),t._v(",\n        请于"+t._s(t.editForm.review_time)+"前,前往"+t._s(t.editForm.review_hospital)+"进行眼底情况检查")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sendSms}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var I=a("VU/8")(B,O,!1,function(t){a("TciO")},"data-v-45d84af0",null).exports,j=a("ARhN"),U=a.n(j),q={data:function(){return{chartColumn:null,chartBar:null,chartLine:null,chartPie:null}},methods:{drawColumnChart:function(){this.chartColumn=U.a.init(document.getElementById("chartColumn")),this.chartColumn.setOption({title:{text:"Column Chart"},tooltip:{},xAxis:{data:["渗出","豹纹眼底","青光眼","白内障","糖网","黄斑病变"]},yAxis:{},series:[{name:"销量",type:"bar",data:[5,20,36,10,10,20]}]})},drawBarChart:function(){this.chartBar=U.a.init(document.getElementById("chartBar")),this.chartBar.setOption({title:{text:"Bar Chart",subtext:"数据来自奥比斯科技"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["2018年","2019年"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:["天乐","兴园","荷叶地","普瑞","爱尔","病患转化数(万)"]},series:[{name:"2018年",type:"bar",data:[18203,23489,29034,104970,131744,630230]},{name:"2019年",type:"bar",data:[19325,23438,31e3,121594,134141,681807]}]})},drawLineChart:function(){this.chartLine=U.a.init(document.getElementById("chartLine")),this.chartLine.setOption({title:{text:"Line Chart"},tooltip:{trigger:"axis"},legend:{data:["短信营销","电话营销","邮件营销"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"短信营销",type:"line",stack:"总量",data:[120,132,101,134,90,230,210]},{name:"电话营销",type:"line",stack:"总量",data:[220,182,191,234,290,330,310]},{name:"邮件营销",type:"line",stack:"总量",data:[820,932,901,934,1290,1330,1320]}]})},drawPieChart:function(){this.chartPie=U.a.init(document.getElementById("chartPie")),this.chartPie.setOption({title:{text:"Pie Chart",subtext:"纯属虚构",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["直接访问","邮件营销","联盟广告","视频广告","搜索引擎"]},series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"直接访问"},{value:310,name:"邮件营销"},{value:234,name:"联盟广告"},{value:135,name:"视频广告"},{value:1548,name:"搜索引擎"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},drawCharts:function(){this.drawColumnChart(),this.drawBarChart(),this.drawLineChart(),this.drawPieChart()}},mounted:function(){this.drawCharts()},updated:function(){this.drawCharts()}},H={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"chart-container"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartColumn"}})]),this._v(" "),e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartBar"}})]),this._v(" "),e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartLine"}})]),this._v(" "),e("el-col",{attrs:{span:12}},[e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"chartPie"}})]),this._v(" "),e("el-col",{attrs:{span:24}},[e("a",{staticStyle:{float:"right"},attrs:{href:"http://echarts.baidu.com/examples.html",target:"_blank"}},[this._v("more>>")])])],1)],1)},staticRenderFns:[]};var W=a("VU/8")(q,H,!1,function(t){a("888q")},"data-v-35561d39",null).exports,M={data:function(){return{patient_info:{},restaurants:[],state:"",timeout:null,suggestions:["定时随访","上级医院就诊","正常,无需随访"],diseases:["高血压视网膜病变","糖尿病视网膜病变","豹纹状眼底","渗出","青光眼","年龄相关性视网膜病变"],fits:["fill"],url1:"https://www.orbisbiotech.cn/media/xingyuan/2019080410421718855145058_Right_1_origin.png",url2:"https://www.orbisbiotech.cn/media/xingyuan/2019080410421718855145058_Left_2_origin.png",srcList:["https://fuss10.elemecdn.com/8/27/f01c15bb73e1ef3793e64e6b7bbccjpeg.jpeg","https://fuss10.elemecdn.com/1/8e/aeffeb4de74e2fde4bd74fc7b4486jpeg.jpeg"],dynamicTagsR:[],dynamicTagsL:[],dynamicTagsA:[],diaStrR:"",diaStrL:"",diaStrA:"",finishSeen:!1,beforeSeen:!0,inputVisibleR:!1,inputVisibleL:!1,inputVisibleA:!1,leftEye:!1,rightEye:!1,advice:!1,inputValueR:"",inputValueL:"",inputValueA:"",seen:!0,seen2:!1,eyeSeen:!1,diaSeen:!0,activeColor1:"azure",activeColor2:"azure",dialogVisible:!1,fullscreenLoading:!1,pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"明天",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}},{text:"一周后",onClick:function(t){var e=new Date;e.setTime(e.getTime()+6048e5),t.$emit("pick",e)}}]},value1:"",value2:""}},methods:{handleCloseR:function(t){this.dynamicTagsR.splice(this.dynamicTagsR.indexOf(t),1)},showInputR:function(){var t=this;this.activeColor2="lightgray",this.inputVisibleR=!0,this.rightEye=!0,this.leftEye=!1,this.$nextTick(function(e){t.$refs.saveTagInputR.$refs.input.focus()})},handleInputConfirmR:function(){this.activeColor2="azure";var t=this.inputValueR;t&&this.dynamicTagsR.push(t),this.inputVisibleR=!1,this.inputValueR=""},handleCloseL:function(t){this.dynamicTagsL.splice(this.dynamicTagsL.indexOf(t),1)},showInputL:function(){var t=this;this.activeColor2="lightgray",this.inputVisibleL=!0,this.rightEye=!1,this.leftEye=!0,this.$nextTick(function(e){t.$refs.saveTagInputL.$refs.input.focus()})},handleInputConfirmL:function(){this.activeColor2="azure";var t=this.inputValueL;t&&this.dynamicTagsL.push(t),this.inputVisibleL=!1,this.inputValueL=""},handleCloseA:function(t){this.dynamicTagsA.splice(this.dynamicTagsA.indexOf(t),1),this.seen=!0,this.seen2=!1,this.value2=""},showInputA:function(){var t=this;this.leftEye=!1,this.rightEye=!1,this.activeColor1="lightgray",this.inputVisibleA=!0,this.advice=!0,this.$nextTick(function(e){t.$refs.saveTagInputA.$refs.input.focus()})},handleInputConfirmA:function(){this.activeColor1="azure";var t=this.inputValueA,e=this.dynamicTagsA;t&&this.dynamicTagsA.push(t),0!==e.length&&(this.seen=!1),this.inputVisibleA=!1,this.inputValueA=""},addDiagnose:function(t){if(this.leftEye){this.dynamicTagsL.push(t);var e=this.duplicateRemove(this.dynamicTagsL);this.dynamicTagsL=e,this.handleInputConfirmL()}else if(this.rightEye){this.dynamicTagsR.push(t);var a=this.duplicateRemove(this.dynamicTagsR);this.dynamicTagsR=a,this.handleInputConfirmR()}},addAdvice:function(t){var e=this.dynamicTagsA;if(this.advice){if(0!==e.length)return;this.dynamicTagsA.push(t),this.handleInputConfirmA(),"上级医院就诊"===t&&(this.dialogVisible=!0,this.seen2=!0)}},formatSex:function(t){return"1"===t.patient_gender?"男":"0"===t.patient_gender?"女":"未知"},finishDiagnose:function(){if(0!==this.dynamicTagsA.length){var t=this.dynamicTagsR.toString(),e=this.dynamicTagsL.toString();this.diaStrR=t,this.diaStrL=e,this.submitDiagnose(),this.eyeSeen=!0,this.diaSeen=!1,this.finishSeen=!0,this.beforeSeen=!1}else this.open()},openFullScreen:function(){var t=this,e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){e.close(),t.finishDiagnose()},500)},backToUndiagnosed:function(){var t=this,e={};e.page_size=this.patient_info.page_size,e.currentPage=this.patient_info.currentPage;var a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){a.close(),t.finishDiagnose(),t.$store.commit("backToUndiagnosed")},1e3)},onlyBack:function(){var t=this,e={};e.page_size=this.patient_info.page_size,e.currentPage=this.patient_info.currentPage;var a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){a.close(),t.$store.commit("backToUndiagnosed",e)},1e3)},getConclusion:function(){var t=this;f.a.get("http://192.168.0.151:7000//conclusion/?&ordering=-times").then(function(e){console.log(e.data);for(var a=e.data,i=[],n=0;n<a.length;n++)i.push(a[n].conclusion);t.diseases=i.slice(0,9)}).catch(function(t){console.log(t)})},submitDiagnose:function(){var t={};t.patient_id=this.patient_info.patient_id,t.diagnose_record=this.patient_info.diagnose_record,t.apply_time=this.patient_info.apply_time,t.patient_name=this.patient_info.patient_name,t.patient_gender=this.patient_info.patient_gender,t.patient_age=this.patient_info.patient_age,t.left_diagnose=this.diaStrL,t.right_diagnose=this.diaStrR,t.diagnose_advice=this.dynamicTagsA[0],this.value2&&(t.review_time=this.value2),f.a.post("http://192.168.0.151:7000/operation/submit/",t).then(function(t){console.log("res=>",t)}).catch(function(t){console.log(t)})},duplicateRemove:function(t){for(var e=[],a=0;a<t.length;a++)-1===e.indexOf(t[a])&&e.push(t[a]);return console.log(e),e},createReport:function(){console.log(1111)},cancelSelectDate:function(){this.dialogVisible=!1,this.seen2=!1,this.value2=""},confirmSelectDate:function(){this.dialogVisible=!1,this.value2||(this.seen2=!1,this.value2="")},open:function(){this.$alert("请添加建议","提示",{confirmButtonText:"确定"})},loadAll:function(){return[{value:"南拳妈妈龙虾盖浇饭",address:"普陀区金沙江路1699号鑫乐惠美食广场A13"}]},querySearchAsync:function(t,e){var a=this.restaurants,i=t?a.filter(this.createStateFilter(t)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(i)},3e3*Math.random())},createStateFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){console.log(t)}},mounted:function(){this.restaurants=this.loadAll(),document.getElementById("aside_id").style.height=window.innerHeight-46+"px",this.patient_info=this.$store.state.patient_info,this.getConclusion()}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-aside",{staticClass:"aside",attrs:{id:"aside_id"}},[a("el-row",{staticStyle:{"text-align":"left","padding-top":"20px"}},[a("i",{staticClass:"icon iconfont icon-icon-test"}),t._v("单击可将词条插入诊断内容\n  ")]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"可模糊搜索疑似病种","prefix-icon":"el-icon-search"},on:{select:t.handleSelect},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1),t._v(" "),a("el-row",{staticStyle:{height:"40px","line-height":"40px","text-align":"left","margin-top":"20px"},style:{backgroundColor:t.activeColor1}},[t._v("\n    建议\n  ")]),t._v(" "),t._l(t.suggestions,function(e){return a("el-row",{key:e.id,staticClass:"suggestion_section"},[a("el-col",{attrs:{span:3}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:18}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.addAdvice(e)}}},[a("div",{staticStyle:{border:"1px solid lightgrey",height:"30px","line-height":"30px","border-radius":"20px"}},[t._v(t._s(e))])])]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(" ")])],1)}),t._v(" "),a("el-row",{staticStyle:{height:"40px","line-height":"40px","text-align":"left","margin-top":"20px","background-color":"azure"},style:{backgroundColor:t.activeColor2}},[t._v("\n    疑似\n  ")]),t._v(" "),t._l(t.diseases,function(e){return a("el-row",{key:e.id,staticClass:"diseases_section"},[a("el-col",{attrs:{span:3}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:18}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.addDiagnose(e)}}},[a("div",{staticStyle:{border:"1px solid lightgrey",height:"30px","line-height":"30px","border-radius":"20px"}},[t._v(t._s(e))])])]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(" ")])],1)})],2),t._v(" "),a("el-main",{staticClass:"main"},[a("el-row",[a("span",[t._v("合肥高新区天乐社区卫生服务中心")])]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px",height:"40px","line-height":"40px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{staticStyle:{"border-top":"lightgrey 1px solid","border-bottom":"lightgrey 1px solid","text-align":"left"},attrs:{span:16}},[a("el-row",[a("el-col",{attrs:{span:6}},[t._v("姓名:"),a("span",[t._v(t._s(t.patient_info.patient_name))])]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("性别:"),"0"===t.patient_info.patient_gender?a("span",[t._v("女")]):a("span",[t._v("男")])]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("年龄:"),a("span",[t._v(t._s(t.patient_info.patient_age))])]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("患者编号:")])],1)],1),t._v(" "),a("el-col",{staticStyle:{border:"1px solid white"},attrs:{span:4}},[t._v(" ")])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-row",{staticStyle:{"text-align":"left","font-weight":"bold"}},[a("el-col",{attrs:{span:11}},[t._v("右眼OD")]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:11}},[t._v("左眼OS")])],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-row",{staticStyle:{"text-align":"left","font-weight":"bold"}},[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"demo-image__preview"},[a("el-image",{staticStyle:{height:"300px"},attrs:{src:t.url1,"preview-src-list":t.srcList}})],1)]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"demo-image__preview"},[a("el-image",{staticStyle:{height:"300px"},attrs:{src:t.url2,"preview-src-list":t.srcList}})],1)])],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1),t._v(" "),a("el-row",{staticStyle:{"text-align":"left"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("span",[t._v("影像发现:")])]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1),t._v(" "),a("el-row",{staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-row",{staticStyle:{"border-top":"1px solid lightgray"}},[a("el-col",{attrs:{span:6}},[t._v("类别")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("数量(个)")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("总面积")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("最大面积mm"),a("sup",[t._v("2")])])],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1),t._v(" "),a("el-row",{staticClass:"dataTable",staticStyle:{"text-align":"left"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-row",[a("el-col",{attrs:{span:6}},[t._v("出血")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("--")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("--")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("--")])],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1),t._v(" "),a("el-row",{staticClass:"dataTable",staticStyle:{"text-align":"left"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-row",{staticStyle:{"border-bottom":"1px solid lightgray"}},[a("el-col",{attrs:{span:6}},[t._v("渗出")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("--")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("--")]),t._v(" "),a("el-col",{attrs:{span:6}},[t._v("--")])],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1),t._v(" "),a("el-row",{staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[t._v("右眼:")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1),t._v(" "),a("el-row",{staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[t._v("左眼:")]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1),t._v(" "),a("el-row",{staticStyle:{"text-align":"left","margin-top":"20px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("span",[t._v("印象:")])]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1),t._v(" "),t.diaSeen?a("el-row",{staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[t._v("右眼:\n        "),t._l(t.dynamicTagsR,function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1,type:"info",effect:"plain"},on:{close:function(a){return t.handleCloseR(e)}}},[t._v("\n          "+t._s(e)+"\n        ")])}),t._v(" "),t.inputVisibleR?a("el-input",{ref:"saveTagInputR",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirmR},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirmR(e)}},model:{value:t.inputValueR,callback:function(e){t.inputValueR=e},expression:"inputValueR"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInputR}},[t._v("+ 添加诊断")])],2),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1):t._e(),t._v(" "),t.diaSeen?a("el-row",{staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[t._v("左眼:\n        "),t._l(t.dynamicTagsL,function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1,effect:"plain",type:"info"},on:{close:function(a){return t.handleCloseL(e)}}},[t._v("\n          "+t._s(e)+"\n        ")])}),t._v(" "),t.inputVisibleL?a("el-input",{ref:"saveTagInputL",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirmL},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirmL(e)}},model:{value:t.inputValueL,callback:function(e){t.inputValueL=e},expression:"inputValueL"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInputL}},[t._v("+ 添加诊断")])],2),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1):t._e(),t._v(" "),t.eyeSeen?a("el-row",{staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[t._v("右眼:"+t._s(t.diaStrR))]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1):t._e(),t._v(" "),t.eyeSeen?a("el-row",{staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[t._v("左眼:"+t._s(t.diaStrL))]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1):t._e(),t._v(" "),t.diaSeen?a("el-row",{staticStyle:{"text-align":"left","margin-top":"20px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("span",[t._v("建议:\n       "),t._l(t.dynamicTagsA,function(e){return a("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1,type:"info",effect:"plain"},on:{close:function(a){return t.handleCloseA(e)}}},[t._v("\n          "+t._s(e)+"\n        ")])}),t._v(" "),t.inputVisibleA?a("el-input",{ref:"saveTagInputA",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirmA},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirmA(e)}},model:{value:t.inputValueA,callback:function(e){t.inputValueA=e},expression:"inputValueA"}}):t._e(),t._v(" "),t.seen?a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInputA}},[t._v("+ 添加建议")]):t._e(),t._v("\n           "),t.seen2?a("span",[t._v("日期:")]):t._e(),t._v(t._s(t.value2)+"\n      ")],2)]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1):t._e(),t._v(" "),t.eyeSeen?a("el-row",{staticStyle:{"text-align":"left","margin-top":"20px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("span",[t._v("建议:"+t._s(t.dynamicTagsA[0])+"\n\n           "),t.seen2?a("span",[t._v("日期:")]):t._e(),t._v(t._s(t.value2)+"\n      ")])]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(" ")])],1):t._e(),t._v(" "),t.beforeSeen?a("el-row",{staticStyle:{"margin-top":"20px",height:"40px","line-height":"40px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left",height:"60px","line-height":"60px","border-top":"1px solid lightgray","border-bottom":"1px solid lightgray"},attrs:{span:16}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-button",{on:{click:t.openFullScreen}},[t._v("完成阅片")])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{on:{click:t.backToUndiagnosed}},[t._v("完成并返回")])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",[t._v("完成并生成报告")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:4}})],1):t._e(),t._v(" "),t.finishSeen?a("el-row",{staticStyle:{"margin-top":"20px",height:"40px","line-height":"40px"}},[a("el-col",{attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left",height:"60px","line-height":"60px","border-top":"1px solid lightgray","border-bottom":"1px solid lightgray"},attrs:{span:16}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-button",{on:{click:t.onlyBack}},[t._v("返回")])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{on:{click:t.createReport}},[t._v("生成报告")])],1),t._v(" "),a("el-col",{attrs:{span:8}},[t._v(" ")])],1)],1),t._v(" "),a("el-col",{attrs:{span:4}})],1):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"请输入去上级医院就诊时间",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{align:"right",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":t.pickerOptions},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelSelectDate}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSelectDate}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var G=a("VU/8")(M,Z,!1,function(t){a("ZnCD")},"data-v-6ccebc67",null).exports,Y={data:function(){return{userName:"",parseWord:"",autoLogin:!1,error:!1,userNameError:"",parseWordError:"",hospital_id:0}},methods:{get_hospital_id:function(t){f.a.get("http://192.168.0.151:7000//users/?username="+t).then(function(t){console.log("hospital_id",t.data[0].hospital_id),o.setCookie("hospital_id",t.data[0].hospital_id,7),console.log("get id from cookie",o.getCookie("hospital_id"))}).catch(function(t){console.log(t)})},login:function(){var t=this,e=this;if(""!==this.userName)if(""!==this.parseWord){console.log("123",this.userName,this.parseWord);try{this.get_hospital_id(this.userName)}catch(t){console.log("the reason of failing to get hospital_id ",t)}var a;(a={username:this.userName,password:this.parseWord},f.a.post($+"/login",a).then(function(t){return t.data})).then(function(a){console.log(a),o.setCookie("name",t.userName,7),o.setCookie("token",a.token,7),e.$store.commit("setInfo"),e.$store.commit("login")}).catch(function(t){e.error="请核实账户或密码是否正确","non_field_errors"in t&&(e.error=t.non_field_errors[0]),"username"in t&&(e.userNameError=t.username[0]),"password"in t&&(e.parseWordError=t.password[0])})}else e.error="请输入密码";else e.error="请输入用户名"},errorUnshow:function(){this.error=!1}},mounted:function(){var t=window.innerHeight;document.getElementById("login").style.height=t+"px"}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"c-box bg-box",attrs:{id:"login"}},[a("div",{staticClass:"login-box clearfix",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"fr form-box"},[a("h2",[t._v("帐号登录")]),t._v(" "),a("form",{attrs:{id:"jsLoginForm",autocomplete:"off"}},[a("input",{attrs:{type:"hidden",name:"csrfmiddlewaretoken",value:"ywSlOHdiGsK6VFB6iyhnB1B30khmz8SU"}}),t._v(" "),a("div",{staticClass:"form-group marb20"},[a("label",[t._v("用 户 名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],attrs:{name:"account_l",id:"account_l",type:"text",placeholder:"手机号/账号"},domProps:{value:t.userName},on:{focus:t.errorUnshow,input:function(e){e.target.composing||(t.userName=e.target.value)}}})]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.userNameError,expression:"userNameError"}],staticClass:"error-text"},[t._v(t._s(t.userNameError))]),t._v(" "),a("div",{staticClass:"form-group marb8"},[a("label",[t._v("密     码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.parseWord,expression:"parseWord"}],attrs:{name:"password_l",id:"password_l",type:"password",placeholder:"请输入您的密码"},domProps:{value:t.parseWord},on:{focus:t.errorUnshow,input:function(e){e.target.composing||(t.parseWord=e.target.value)}}})]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.parseWordError,expression:"parseWordError"}],staticClass:"error-text"},[t._v(t._s(t.parseWordError))]),t._v(" "),a("div",{staticClass:"auto-box marb38"}),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"error-text"},[t._v(t._s(t.error))]),t._v(" "),a("input",{staticClass:"btn btn-green",staticStyle:{outline:"none"},attrs:{id:"jsLoginBtn",type:"button",value:"立即登录 > "},on:{click:t.login}})])])])])])},staticRenderFns:[]};var K=a("VU/8")(Y,J,!1,function(t){a("zdf0")},"data-v-f3cd9a9e",null).exports;window.onresize=function(){var t=window.innerWidth-250;console.log(t),document.getElementById("rightNav").style.width=t+"px"};var Q={name:"App",created:function(){o.getCookie("token")?this.$store.commit("login"):this.$store.commit("logout")},mounted:function(){var t=window.innerWidth-250;console.log(t),document.getElementById("rightNav").style.width=t+"px"},components:{leftNav:p,topHeader:_,undiagnosed:P,diagnosed:N,transform:I,statistics:W,report:G,login:K},data:function(){return{seen:!1,msg:"Hello Vuex"}},store:l},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.$store.state.login?a("login"):t._e(),t._v(" "),t.$store.state.leftNav?a("leftNav"):t._e(),t._v(" "),t.$store.state.leftNav?a("div",{staticClass:"main",attrs:{id:"rightNav"}},[a("router-view"),t._v(" "),t.$store.state.topHeader?a("topHeader"):t._e(),t._v(" "),t.$store.state.undiagnosed?a("undiagnosed"):t._e(),t._v(" "),t.$store.state.diagnosed?a("diagnosed"):t._e(),t._v(" "),t.$store.state.transform?a("transform"):t._e(),t._v(" "),t.$store.state.statistics?a("statistics"):t._e(),t._v(" "),t.$store.state.report?a("report"):t._e()],1):t._e()],1)},staticRenderFns:[]};var tt=a("VU/8")(Q,X,!1,function(t){a("n9ta")},null,null).exports,et=a("/ocq"),at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),a("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),a("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),a("br"),t._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},at,!1,function(t){a("UPVZ")},"data-v-1875956a",null).exports;i.default.use(et.a);var it=new et.a({routes:[]}),nt=a("zL8q"),st=a.n(nt);a("tvR6");i.default.config.productionTip=!1,i.default.use(st.a),new i.default({el:"#app",router:it,components:{App:tt},template:"<App/>"})},SvL8:function(t,e){},TciO:function(t,e){},UPVZ:function(t,e){},ZnCD:function(t,e){},hhvP:function(t,e){},n9ta:function(t,e){},tvR6:function(t,e){},zdf0:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.bf0a4a4bc7f2a0bda83a.js.map